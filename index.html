<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Capitale</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div class="app">
    <div class="card">
      <h1>üåç Quiz Capitale</h1>

      <!-- Setup -->
      <div id="setup" class="grid">
        <div class="row">
          <input id="playerName" placeholder="Ton pseudo (ex: Thibaud)" />
          <input id="roomId" placeholder="Code salon (ex: RIO974)" />
        </div>
        <div class="row">
            <!-- R√©gions (compact multi-select dropdown) -->
            <details id="regionPicker" class="picker">
              <summary>
                <span class="muted small">R√©gions :</span>
                <span id="regionSummary" class="summary-text" aria-live="polite">Toutes</span>
              </summary>
              <div class="picker-menu">
                <label><input type="checkbox" class="regionChk" value="Afrique" checked><span>Afrique</span></label>
                <label><input type="checkbox" class="regionChk" value="Am√©rique" checked><span>Am√©rique</span></label>
                <label><input type="checkbox" class="regionChk" value="Asie" checked><span>Asie</span></label>
                <label><input type="checkbox" class="regionChk" value="Europe" checked><span>Europe</span></label>
                <label><input type="checkbox" class="regionChk" value="Oc√©anie" checked><span>Oc√©anie</span></label>
              </div>
            </details>

            
            <!-- (keep your existing selects) -->
            <select id="questionCount" class="compact"></select>
            <select id="modeSelect" title="Mode de jeu" class="compact">
              <option value="text">Mode saisie</option>
              <option value="mc">Mode QCM (4 choix)</option>
            </select>  <!-- ‚Üê manquait -->
            
            <label for="corrSelect" class="small muted" style="align-self:center">Correction :</label>
            <select id="corrSelect" class="compact">
              <option value="off">Sans</option>
              <option value="on">Avec</option>
            </select>


            <button id="createBtn" class="primary">Cr√©er le salon</button>
            <button id="joinBtn">Rejoindre</button>
          </div>
        <p class="small muted">1) Entrez le <b>code salon</b>. 2) Choisissez le <b>mode</b>. 3) Cr√©ez le <b>salon</b>. 4) <b>Commencez !</b></p>
        <div class="sep"></div>

        <!-- Lobby -->
        <div id="lobby" class="hidden">
          <div class="row" style="justify-content:space-between;align-items:center">
            <div>
              <span class="pill">Salon: <span id="lobbyRoom" class="code"></span></span>
              <span class="pill">Questions: <span id="lobbyCount"></span></span>
              <span class="pill">Mode: <span id="lobbyMode"></span></span>
            </div>
            <div><button id="startBtn" class="primary">Commencer ‚ñ∂</button></div>
          </div>
          <div class="board" style="margin-top:10px">
            <div class="panel"><div class="muted small">Joueurs connect√©s</div><ul id="players"></ul></div>
            <div class="panel"><div class="muted small">Partage</div><div class="small">Code √† envoyer : <b id="shareCode" class="code"></b></div></div>
          </div>
        </div>
      </div>

      <!-- Game -->
      <div id="game" class="hidden">
        <div class="row" style="justify-content:space-between;align-items:center">
          <div class="pill">Salon <span id="gameRoom" class="code"></span></div>
          <div class="pill">Question <span id="qIndex">1</span>/<span id="qTotal">10</span></div>
          <div class="pill timer" id="timer">30</div>
        </div>
        <div class="center" style="margin:10px 0 6px">
          <div class="question">Quelle est la capitale de</div>
        </div>
        <div class="center"><div class="country" id="country"></div></div>

        <!-- Zones de r√©ponse -->
        <div id="textZone" class="answers row center">
          <input id="answer" placeholder="Ta r√©ponse" autocomplete="off" />
          <button id="submitBtn" class="primary">Valider</button>
        </div>
        <!-- Ligne de correction pour le mode saisie -->
        <div id="correctionLine" class="small hidden"></div>
        <div id="mcZone" class="mc-grid hidden">
          <button class="mc-btn" data-i="0"></button>
          <button class="mc-btn" data-i="1"></button>
          <button class="mc-btn" data-i="2"></button>
          <button class="mc-btn" data-i="3"></button>
        </div>

        <div class="footer">
          <div class="small muted">Astuce: accents/majuscules ignor√©s.</div>
        </div>
        <div id="roundStatus" class="small muted" style="margin-top:6px"></div>
      </div>

      <!-- Results -->
      <div id="results" class="hidden">
        <h2>üèÅ R√©sultats</h2>
        <p class="small muted" id="resSubtitle"></p>
        <div class="board" style="margin-bottom:10px">
          <div class="panel"><div id="meFinal"></div></div>
          <div class="panel"><div id="opFinal"></div></div>
        </div>
        <div class="panel">
          <div class="small muted" style="margin-bottom:8px">D√©tail des questions</div>
          <div style="max-height:50vh;overflow:auto">
            <table id="detailTable">
              <thead>
                <tr>
                  <th>#</th><th>Pays</th><th>Capitale</th>
                  <th id="colMe">Toi</th><th id="colOp">Adversaire</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <div class="sep"></div>
        <button onclick="window.location.reload()">Rejouer</button>
      </div>
    </div>
  </div>

  <!-- App JS (module) -->
  <script type="module" src="./app.js"></script>
</body>
</html>
